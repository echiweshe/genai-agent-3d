<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500">
  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">TCP 3-Way Handshake with Options Negotiation</text>
  
  <!-- Client and Server boxes -->
  <rect x="100" y="80" width="150" height="60" rx="5" ry="5" fill="#4285f4" stroke="#2a56c6" stroke-width="2"/>
  <text x="175" y="115" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">Client</text>
  
  <rect x="550" y="80" width="150" height="60" rx="5" ry="5" fill="#34a853" stroke="#1e8e3e" stroke-width="2"/>
  <text x="625" y="115" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">Server</text>
  
  <!-- Vertical timeline lines -->
  <line x1="175" y1="140" x2="175" y2="450" stroke="#4285f4" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="625" y1="140" x2="625" y2="450" stroke="#34a853" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Step 1: SYN -->
  <path d="M175,180 L615,230" stroke="#db4437" stroke-width="2" marker-end="url(#arrowhead)"/>
  <rect x="350" y="180" width="100" height="25" rx="5" ry="5" fill="#fce8e6" stroke="#db4437" stroke-width="1"/>
  <text x="400" y="197" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#db4437">SYN</text>
  
  <!-- Step 2: SYN-ACK -->
  <path d="M625,280 L185,330" stroke="#db4437" stroke-width="2" marker-end="url(#arrowhead)"/>
  <rect x="350" y="280" width="100" height="25" rx="5" ry="5" fill="#fce8e6" stroke="#db4437" stroke-width="1"/>
  <text x="400" y="297" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#db4437">SYN-ACK</text>
  
  <!-- Step 3: ACK -->
  <path d="M175,380 L615,430" stroke="#db4437" stroke-width="2" marker-end="url(#arrowhead)"/>
  <rect x="350" y="380" width="100" height="25" rx="5" ry="5" fill="#fce8e6" stroke="#db4437" stroke-width="1"/>
  <text x="400" y="397" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#db4437">ACK</text>
  
  <!-- Options details -->
  <rect x="200" y="160" width="180" height="40" rx="5" ry="5" fill="#e6f4ea" stroke="#34a853" stroke-width="1"/>
  <text x="290" y="175" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e8e3e">SEQ=x</text>
  <text x="290" y="190" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e8e3e">Options: MSS, Window Scale</text>
  
  <rect x="420" y="260" width="180" height="40" rx="5" ry="5" fill="#e6f4ea" stroke="#34a853" stroke-width="1"/>
  <text x="510" y="275" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e8e3e">SEQ=y, ACK=x+1</text>
  <text x="510" y="290" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e8e3e">Options: MSS, SACK, Window Scale</text>
  
  <rect x="200" y="360" width="180" height="40" rx="5" ry="5" fill="#e6f4ea" stroke="#34a853" stroke-width="1"/>
  <text x="290" y="375" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e8e3e">SEQ=x+1, ACK=y+1</text>
  <text x="290" y="390" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1e8e3e">Options: Negotiated Parameters</text>
  
  <!-- Connection Established -->
  <rect x="300" y="450" width="200" height="30" rx="15" ry="15" fill="#e8f0fe" stroke="#4285f4" stroke-width="1.5"/>
  <text x="400" y="470" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#4285f4">Connection Established</text>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#db4437"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="50" y="450" width="120" height="40" rx="5" ry="5" fill="white" stroke="#ccc" stroke-width="1"/>
  <text x="110" y="470" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">TCP Options:</text>
  <text x="110" y="485" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">MSS, Window Scale, SACK</text>
</svg>